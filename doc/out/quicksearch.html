<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"utils.js.html":{"id":"utils.js.html","title":"Source: utils.js","body":" Kirk Global asterisk (星号生成)dataURLtoBlob (Base64-&gt;Blob)delHtmlTag (html -&gt; txt)documentTitle (页面title)getBytesCount (统计中英文数量)getGoodNum (好评率)getPageOn (获取分页数值 pageOn)inputNum (只能输入数字 替换后 光标在原来位置)isCardId (验证身份证)isMobile (判断是否是手机号)isPhone (判断是手机端还是电脑端)loginReturnUrl (登录后跳转)priceCents (价格转成 分)priceIsOk (判断价格是否合法)priceOnBlur (价格表单离开)priceOnKeyUp (价格控制)redirect (跳转)showImg (防盗链iframe)strURLReplace (替换字符串中的URL)timeBefore (几天前)toDecimal2 (个人账户)toFixedNumPriceOne (转价格)toFixedNumPriceTwo (保留两位价格)txtIntercept (截取长度)urlParam (截取URL参数) Source: utils.js /** * 截取URL参数 * @param {string} name 截取的key * @param {string} [url] 被截取的url * @returns {string} 截取的val */ let urlParam = (name, url) =&gt; { let reg = new RegExp(&quot;.*[&amp;?]&quot; + name + &quot;=([^&amp;]*)(&amp;|$)&quot;); let r; if (!url) { r = window.location.search.match(reg); } else { r = url.match(reg); } if (r) return decodeURIComponent(r[1]); return ''; }; /** * 跳转 * @param {string} address 跳转地址 */ let redirect = (address) =&gt; { window.location.href = address; }; /** * 登录后跳转 */ let loginReturnUrl = () =&gt; { window.location.href = 'loginReg.html?returnUrl=' + encodeURIComponent(window.location.href); }; /** * 统计中英文数量 * @param {string} str 统计的字符串 1个汉字 等于两个字母 * @returns {number} 统计的数量 */ let getBytesCount = (str) =&gt; { let bytesCount = 0; for (let i = 0; i &lt; str.length; i++) { let c = str.charAt(i); if (/^[\\u0000-\\u00ff]$/.test(c)) //匹配双字节 { bytesCount += 0.5; } else { bytesCount += 1; } } return bytesCount; }; /** * 截取长度 * @param {string} str 被截取的字符串 * @param {number} num 需要截取的长度 * @returns {string} 统计的数量 */ let txtIntercept = (str, num) =&gt; { if (getBytesCount(str) &gt; num) { return str.substring(0, num) + '...' } else { return str } }; /** * 判断是手机端还是电脑端 */ let isPhone = () =&gt; { if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) { return true; } else { return false; } }; /** * 验证身份证 * @param {string} str 传进来的字符串 */ let isCardId = (str) =&gt; { let reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/; if (reg.test(str)) { return true; } else { return false; } }; /** * 判断是否是手机号 * @param {string} val 传进来的字符串 */ let isMobile = (val) =&gt; { let reg = /^1[3|4|5|7|8][0-9]\\d{8}$/; return reg.test(val); }; /** * 判断价格是否合法 * @param {string} price 传进来的价格 */ let priceIsOk = (price) =&gt; { let reg = /(^[1-9]([0-9]+)?(\\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\\.[0-9]([0-9])?$)/; if (reg.test(price)) { return true; } else { return false } }; /** * 页面title * @param {string/Array} arr 需要设置的标题 */ let documentTitle = (arr) =&gt; { let title = document.title; let str = ''; if (typeof arr === 'object') { str = arr.join('_'); } else { str = arr; } document.title = str + '_' + title; }; /** * 只能输入数字 替换后 光标在原来位置 * @param {object} e 传进来的字符串 */ let inputNum = (e) =&gt; { e.target.value.replace(/\\D/g, function (char, index, val) { e.target.value = val.replace(/\\D/g, &quot;&quot;); let rTextRange = null; if (e.target.setSelectionRange) { e.target.setSelectionRange(index, index); } else {//支持ie rTextRange = e.target.createTextRange(); rTextRange.moveStart('character', index); rTextRange.collapse(true); rTextRange.select(); } }); }; /** * 替换字符串中的URL * @param {string} str 传进来的字符串 */ let strURLReplace = (str) =&gt; { let strRegex = '((https|http)://)[A-Za-z0-9-_]+\\\\.[A-Za-z0-9-_%&amp;?/.=]+'; /*let strRegex = '((https|http)://)[A-Za-z0-9-_]+\\\\.[A-Za-z0-9-_%&amp;\\?\\/.=]+';*/ let regex = new RegExp(strRegex, &quot;gi&quot;); let replaceReg = (reg, str) =&gt; { return str.replace(reg, function (m) { return '&lt;a href=&quot;' + m + '&quot; target=&quot;_blank&quot;&gt;' + m + '&lt;/a&gt;'; }); }; str = replaceReg(regex, str); return str; }; /** * 星号生成 * @param {number} num 需要几个星号 */ let asterisk = (num) =&gt; { let returnVal = ''; for (let i = 0; i &lt; num; i++) { returnVal += '*' } return returnVal; }; /** * 转价格 * @param {string/object} num 价格 * @param {number} start 开始位置 */ let toFixedNumPriceOne = (num, start) =&gt; { let returnVal = '&lt;span class=&quot;no&quot;&gt;暂无报价&lt;/span&gt;'; let startStr = ''; if (start) { startStr = '&lt;b&gt;起&lt;/b&gt;'; } if (num) { returnVal = '&lt;i class=&quot;sub&quot;&gt;¥&lt;/i&gt;' + Math.abs(num.toFixed(2)) + startStr; } return returnVal; }; /** * 保留两位价格 * @param {string} num 价格 */ let toFixedNumPriceTwo = (num) =&gt; { if (num) { return '&lt;i class=&quot;sub&quot;&gt;¥&lt;/i&gt;' + Math.abs(num.toFixed(2)); } return '&lt;i class=&quot;sub&quot;&gt;¥&lt;/i&gt;' + 0; }; /** * 个人账户 * @param {number} x 价格 */ let toDecimal2 = (x) =&gt; { let f = parseFloat(x); if (isNaN(f)) { return false; } let f2 = Math.round(x * 100) / 100; let s = f2.toString(); let rs = s.indexOf('.'); if (rs &lt; 0) { rs = s.length; s += '.'; } while (s.length &lt;= rs + 2) { s += '0'; } return s; }; /** * 好评率 * @param {number} g 好评数量 * @param {number} m 中评数量 * @param {number} b 差评数量 */ let getGoodNum = (g, m, b) =&gt; { let total = g + m + b; if (Number(g) === 0) { return 0 + &quot;%&quot; } else { return ((g / total) * 100).toFixed(0) + &quot;%&quot; } }; /** * 几天前 * @param {string} now 当前时间戳 * @param {string} time 需要算的时间戳 */ let timeBefore = (now, time) =&gt; { let minute = 1000 * 60; let hour = minute * 60; let day = hour * 24; /*let halfamonth = day * 15;*/ let month = day * 30; let diffValue = now - time; if (diffValue &lt; 0) { //若日期不符则弹出窗口告之 //alert(&quot;结束日期不能小于开始日期！&quot;); } let monthC = diffValue / month; let weekC = diffValue / (7 * day); let dayC = diffValue / day; let hourC = diffValue / hour; let minC = diffValue / minute; let result = ''; /*下面的空字符串 是发表于 */ if (monthC &gt;= 1) { result = &quot;&quot; + parseInt(monthC, 10) + &quot;个月前&quot;; } else if (weekC &gt;= 1) { result = &quot;&quot; + parseInt(weekC, 10) + &quot;周前&quot;; } else if (dayC &gt;= 1) { result = &quot;&quot; + parseInt(dayC, 10) + &quot;天前&quot;; } else if (hourC &gt;= 1) { result = &quot;&quot; + parseInt(hourC, 10) + &quot;个小时前&quot;; } else if (minC &gt;= 1) { result = &quot;&quot; + parseInt(minC, 10) + &quot;分钟前&quot;; } else result = &quot;刚刚&quot;; return result; }; /** * 价格控制 * @param {object} e 格式化价格 */ let priceOnKeyUp = (e) =&gt; { let val = e.target; let regStr = [ ['^0(\\\\d+)$', '$1'], //禁止录入整数部分两位以上，但首位为0 ['[^\\\\d\\\\.]+$', ''], //禁止录入任何非数字和点 ['\\\\.(\\\\d?)\\\\.+', '.$1'], //禁止录入两个以上的点 ['^(\\\\d+\\\\.\\\\d{2}).+', '$1'] //禁止录入小数点后两位以上 ]; for (let i = 0; i &lt; regStr.length; i++) { let reg = new RegExp(regStr[i][0]); val.value = val.value.replace(reg, regStr[i][1]); } /*48 - 57 数字键 , 8删除键,37-40 上下左右键 , 13 回车键*/ /* let val = e.target; console.log(e.keyCode); let keyCode = Number(e.keyCode); if (keyCode &gt;= 48 || keyCode &lt;= 57 || keyCode === 8 || keyCode &gt;= 37 || keyCode &lt;= 40 || keyCode === 13){ }else{ }*/ }; /** * 价格表单离开 * @param {object} e 格式化价格 */ let priceOnBlur = (e) =&gt; { let th = e.target; let v = th.value; if (v === '') { v = '0.00'; } else if (v === '0') { v = '0.00'; } else if (v === '0.') { v = '0.00'; } else if (/^0+\\d+\\.?\\d*.*$/.test(v)) { v = v.replace(/^0+(\\d+\\.?\\d*).*$/, '$1'); //v = inp.getRightPriceFormat(v).val; } else if (/^0\\.\\d$/.test(v)) { v = v + '0'; } else if (!/^\\d+\\.\\d{2}$/.test(v)) { if (/^\\d+\\.\\d{2}.+/.test(v)) { v = v.replace(/^(\\d+\\.\\d{2}).*$/, '$1'); } else if (/^\\d+$/.test(v)) { v = v + '.00'; } else if (/^\\d+\\.$/.test(v)) { v = v + '00'; } else if (/^\\d+\\.\\d$/.test(v)) { v = v + '0'; } else if (/^[^\\d]+\\d+\\.?\\d*$/.test(v)) { v = v.replace(/^[^\\d]+(\\d+\\.?\\d*)$/, '$1'); } else if (/\\d+/.test(v)) { v = v.replace(/^[^\\d]*(\\d+\\.?\\d*).*$/, '$1'); //ty = false; } else if (/^0+\\d+\\.?\\d*$/.test(v)) { v = v.replace(/^0+(\\d+\\.?\\d*)$/, '$1'); //ty = false; } else { v = '0.00'; } } th.value = v; }; /** * 价格转成 分 * @param {string/number} val 格式化价格 */ let priceCents = (val) =&gt; { if ((val === 0 || val === '0.00' || val !== '') &amp;&amp; val !== undefined) { return val * 100 } else { return ''; } }; let priceDollars = (val) =&gt; { if ((val === 0 || val === '0.00' || val !== '') &amp;&amp; val !== undefined) { return (val / 100).toFixed(2) } else { return '' } }; let parent = window.parent; parent.imgSrc = {}; /** * 防盗链iframe * @param {string} url 传进去url * @param {string} width 宽度 * @param {string} height 高度 * @param {string} key 可变ID */ let showImg = (url, width, height, key) =&gt; { let id = 'imgIfr' + key; parent.imgSrc[id] = '&lt;img src=\\'' + url + '\\' style=&quot;width:100%;height:100%; display:block;position:absolute;left:0;top:0;&quot;/&gt;'; return '&lt;iframe src=&quot;javascript:parent.imgSrc[\\'' + id + '\\'];&quot; frameBorder=&quot;0&quot; scrolling=&quot;no&quot; style=&quot;width:' + width + ';height:' + height + ';overflow: hidden;&quot;&gt;&lt;/iframe&gt;'; }; let cookie = { /** * * @desc 设置Cookie * @param {String} name * @param {String} value * @param {Number} days */ save: (name, value, days) =&gt; { let date = new Date(); date.setDate(date.getDate() + days); document.cookie = name + '=' + value + ';expires=' + date; }, /** * 根据name读取cookie * @param {String} name * @return {String} */ load: (name) =&gt; { let arr = document.cookie.replace(/\\s/g, &quot;&quot;).split(';'); for (let i = 0; i &lt; arr.length; i++) { let tempArr = arr[i].split('='); if (tempArr[0] === name) { return decodeURIComponent(tempArr[1]); } } return ''; }, /** * * @desc 根据name删除cookie * @param {String} name */ remove: (name) =&gt; { // 设置已过期，系统会立刻删除cookie this.save(name, '1', -1); } }; /** * 批量删除cookie * @param {Array} nameArray 被删除的cookie 名称 数组 * @param {object} opt 被删除的cookie 参数 */ /*let cookieDel = (nameArray, opt) =&gt; { nameArray.map((data) =&gt; { cookie.remove(data, opt,-1); return false }) };*/ /** * Base64-&gt;Blob * @param {Object} dataUrl Base64 图片数据 * @returns {string} 返回Blob图片地址 */ let dataURLtoBlob = (dataUrl) =&gt; { let arr = dataUrl.split(','), mime = arr[0].match(/:(.*?);/)[1], bsTr = atob(arr[1]), n = bsTr.length, u8arr = new Uint8Array(n); while (n--) { u8arr[n] = bsTr.charCodeAt(n); } return new Blob([u8arr], {type: mime}); }; /** * html -&gt; txt * @param {string} str html字符串 * @returns {string} 返回纯文本 */ let delHtmlTag = (str) =&gt; { return str.replace(/&lt;[^&gt;]+&gt;/g, &quot;&quot;);//去掉所有的html标记 }; /** * 获取分页数值 pageOn */ let getPageOn = () =&gt; { return Number(window.location.href.substring(window.location.href.indexOf('pageOn=') + 7, window.location.href.length) || 0) }; export default { &quot;urlParam&quot;: urlParam, &quot;redirect&quot;: redirect, &quot;loginReturnUrl&quot;: loginReturnUrl, &quot;getBytesCount&quot;: getBytesCount, &quot;txtIntercept&quot;: txtIntercept, &quot;isPhone&quot;: isPhone, &quot;isCardId&quot;: isCardId, &quot;isMobile&quot;: isMobile, &quot;priceIsOk&quot;: priceIsOk, &quot;documentTitle&quot;: documentTitle, &quot;inputNum&quot;: inputNum, &quot;asterisk&quot;: asterisk, &quot;toFixedNumPriceOne&quot;: toFixedNumPriceOne, &quot;toFixedNumPriceTwo&quot;: toFixedNumPriceTwo, &quot;strURLReplace&quot;: strURLReplace, &quot;toDecimal2&quot;: toDecimal2, &quot;getGoodNum&quot;: getGoodNum, &quot;timeBefore&quot;: timeBefore, &quot;priceOnKeyUp&quot;: priceOnKeyUp, &quot;priceOnBlur&quot;: priceOnBlur, &quot;priceCents&quot;: priceCents, &quot;priceDollars&quot;: priceDollars, &quot;cookie&quot;: cookie, &quot;showImg&quot;: showImg, &quot;dataURLtoBlob&quot;: dataURLtoBlob, &quot;delHtmlTag&quot;: delHtmlTag, &quot;getPageOn&quot;: getPageOn } × Search results Close "},"global.html":{"id":"global.html","title":"Global","body":" Kirk Global asterisk (星号生成)dataURLtoBlob (Base64-&gt;Blob)delHtmlTag (html -&gt; txt)documentTitle (页面title)getBytesCount (统计中英文数量)getGoodNum (好评率)getPageOn (获取分页数值 pageOn)inputNum (只能输入数字 替换后 光标在原来位置)isCardId (验证身份证)isMobile (判断是否是手机号)isPhone (判断是手机端还是电脑端)loginReturnUrl (登录后跳转)priceCents (价格转成 分)priceIsOk (判断价格是否合法)priceOnBlur (价格表单离开)priceOnKeyUp (价格控制)redirect (跳转)showImg (防盗链iframe)strURLReplace (替换字符串中的URL)timeBefore (几天前)toDecimal2 (个人账户)toFixedNumPriceOne (转价格)toFixedNumPriceTwo (保留两位价格)txtIntercept (截取长度)urlParam (截取URL参数) Global Methods asterisk(num) 星号生成 Parameters: Name Type Description num number 需要几个星号 Source: utils.js, line 159 dataURLtoBlob(dataUrl) Base64-&gt;Blob Parameters: Name Type Description dataUrl Object Base64 图片数据 Source: utils.js, line 424 Returns: 返回Blob图片地址 Type string delHtmlTag(str) html -&gt; txt Parameters: Name Type Description str string html字符串 Source: utils.js, line 437 Returns: 返回纯文本 Type string documentTitle(arr) 页面title Parameters: Name Type Description arr string/Array 需要设置的标题 Source: utils.js, line 110 getBytesCount(str) 统计中英文数量 Parameters: Name Type Description str string 统计的字符串 1个汉字 等于两个字母 Source: utils.js, line 36 Returns: 统计的数量 Type number getGoodNum(g, m, b) 好评率 Parameters: Name Type Description g number 好评数量 m number 中评数量 b number 差评数量 Source: utils.js, line 219 getPageOn() 获取分页数值 pageOn Source: utils.js, line 443 inputNum(e) 只能输入数字 替换后 光标在原来位置 Parameters: Name Type Description e object 传进来的字符串 Source: utils.js, line 124 isCardId(str) 验证身份证 Parameters: Name Type Description str string 传进来的字符串 Source: utils.js, line 78 isMobile(val) 判断是否是手机号 Parameters: Name Type Description val string 传进来的字符串 Source: utils.js, line 90 isPhone() 判断是手机端还是电脑端 Source: utils.js, line 67 loginReturnUrl() 登录后跳转 Source: utils.js, line 28 priceCents(val) 价格转成 分 Parameters: Name Type Description val string/number 格式化价格 Source: utils.js, line 342 priceIsOk(price) 判断价格是否合法 Parameters: Name Type Description price string 传进来的价格 Source: utils.js, line 98 priceOnBlur(e) 价格表单离开 Parameters: Name Type Description e object 格式化价格 Source: utils.js, line 301 priceOnKeyUp(e) 价格控制 Parameters: Name Type Description e object 格式化价格 Source: utils.js, line 273 redirect(address) 跳转 Parameters: Name Type Description address string 跳转地址 Source: utils.js, line 22 showImg(url, width, height, key) 防盗链iframe Parameters: Name Type Description url string 传进去url width string 宽度 height string 高度 key string 可变ID Source: utils.js, line 365 strURLReplace(str) 替换字符串中的URL Parameters: Name Type Description str string 传进来的字符串 Source: utils.js, line 142 timeBefore(now, time) 几天前 Parameters: Name Type Description now string 当前时间戳 time string 需要算的时间戳 Source: utils.js, line 232 toDecimal2(x) 个人账户 Parameters: Name Type Description x number 价格 Source: utils.js, line 196 toFixedNumPriceOne(num, start) 转价格 Parameters: Name Type Description num string/object 价格 start number 开始位置 Source: utils.js, line 171 toFixedNumPriceTwo(num) 保留两位价格 Parameters: Name Type Description num string 价格 Source: utils.js, line 186 txtIntercept(str, num) 截取长度 Parameters: Name Type Description str string 被截取的字符串 num number 需要截取的长度 Source: utils.js, line 57 Returns: 统计的数量 Type string urlParam(name [, url]) 截取URL参数 Parameters: Name Type Argument Description name string 截取的key url string &lt;optional&gt; 被截取的url Source: utils.js, line 7 Returns: 截取的val Type string × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Kirk Global asterisk (星号生成)dataURLtoBlob (Base64-&gt;Blob)delHtmlTag (html -&gt; txt)documentTitle (页面title)getBytesCount (统计中英文数量)getGoodNum (好评率)getPageOn (获取分页数值 pageOn)inputNum (只能输入数字 替换后 光标在原来位置)isCardId (验证身份证)isMobile (判断是否是手机号)isPhone (判断是手机端还是电脑端)loginReturnUrl (登录后跳转)priceCents (价格转成 分)priceIsOk (判断价格是否合法)priceOnBlur (价格表单离开)priceOnKeyUp (价格控制)redirect (跳转)showImg (防盗链iframe)strURLReplace (替换字符串中的URL)timeBefore (几天前)toDecimal2 (个人账户)toFixedNumPriceOne (转价格)toFixedNumPriceTwo (保留两位价格)txtIntercept (截取长度)urlParam (截取URL参数) × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
